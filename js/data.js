'use strict';
(function () {

  const ADS_COUNT = 8;
  const PRICE_MIN = 100;
  const PRICE_MAX = 300;
  const ROOMS_MIN = 1;
  const ROOMS_MAX = 7;
  const GUESTS_MIN = 1;
  const GUESTS_MAX = 5;
  const LOCATION_Y_MIN = 130;
  const LOCATION_Y_MAX = 630;

  const CHECKIN_VARIANTS = [`12:00`, `13:00`, `14:00`];
  const CHECKOUT_VARIANTS = [`12:00`, `13:00`, `14:00`];
  const APPARTMENTS = [`palace`, `flat`, `house`, `bungalo`];
  const FEATURES = [`wifi`, `dishwasher`, `parking`, `washer`, `elevator`, `conditioner`];
  const PHOTOS = [`http://o0.github.io/assets/images/tokyo/hotel1.jpg`, `http://o0.github.io/assets/images/tokyo/hotel2.jpg`, `http://o0.github.io/assets/images/tokyo/hotel3.jpg`];

  const getAuthor = function (idx) {
    return {"avatar": `img/avatars/user0${idx}.png`};
  };

  const getOffer = function (Location) {
    return {
      "title": `строка, заголовок предложения`,
      "address": `${Location.x}, ${Location.y}`,
      "price": window.util.getRandomInInterval(PRICE_MIN, PRICE_MAX), //  число, стоимость
      "type": window.util.getRandomArrayElement(APPARTMENTS),
      "rooms": window.util.getRandomInInterval(ROOMS_MIN, ROOMS_MAX),
      "guests": window.util.getRandomInInterval(GUESTS_MIN, GUESTS_MAX),
      "checkin": window.util.getRandomArrayElement(CHECKIN_VARIANTS),
      "checkout": window.util.getRandomArrayElement(CHECKOUT_VARIANTS),
      "features": window.util.getRandomLengthArray(FEATURES),
      "description": `строка с описанием`,
      "photos": window.util.getRandomLengthArray(PHOTOS),
    };
  };

  const createFakeAd = function (idx) {
    const tmpaAthor = getAuthor(idx);

    const tmpLocation = {
      "x": window.util.getRandomInInterval(0, window.globalConsts.MAX_WIDTH), // случайное число, координата x метки на карте. Значение ограничено размерами блока, в котором перетаскивается метка.
      "y": window.util.getRandomInInterval(LOCATION_Y_MIN, LOCATION_Y_MAX) // случайное число, координата y метки на карте от 130 до 630.
    };
    const tmpOffer = getOffer(tmpLocation);

    const tmpAd = {
      "author": tmpaAthor,
      "offer": tmpOffer,
      "location": tmpLocation
    };
    return tmpAd;
  };

  const makeFakeAds = function () {
    let tmpAds = [];
    for (let i = 1; i <= ADS_COUNT; i++) {
      let tmpAd = createFakeAd(i);
      tmpAds.push(tmpAd);
    }
    return tmpAds;
  };

  window.data = {
    generate: makeFakeAds
  };

})();
